language: java
dist: trusty
jdk:
  - oraclejdk8

script:
  - "./gradlew --stacktrace build"
  - "./gradlew --stacktrace docs"
  - "./gradlew codeCoverageReport"

after_success:
  - bash <(curl -s https://codecov.io/bash)

notifications:
  irc: irc.freenode.org#islandora

deploy:
  skip_cleanup: true
  provider: script
  script:
    - "./gradlew uploadArchives -PossrhUsername='${SONATYPE_USERNAME}' -PossrhPassword='${SONATYPE_PASSWORD}'"
  on:
    branch: master

# Secure env variables for snapshot releases
env:
  global:
  - secure: MyVEaWLhdfNYZOOrlMJdNIdEvfaDS899sNrbP5t9IevONWh/eXaKMQsDIiwF9Be7GlPrig66b+uDJ022KqMjYHpaIdgRLmd9QxtPfT1f/LUxg3nGS3VhUkUCJnuBKtdiw+jaQiIr82BIx3k65UN8H7HNKpCEcD1/r7kI8Su40dZUjfl4oWxfamlVGw6mqjNm1BbDiqQe8JV0uX3t71uwSqij0KUZet23KpPH24bZteUUnWw6RFG0WBsMMbqIFgnHQ+24GpI7Mz7AlniobVBm30edUMirmXAqElfoDg1glUGb4O68eK1RNQ9OV2oz0JMKNd7Q7+p78O9dVr3N/yn9wy4wt1Le+sAkayasEZs8XAcwDsr52gVAFu0Fgv4LjYJsE1RDRQVVVC1QUEhXbyJgcZeSlGTlY86piW2zZ0HnrZs6Muv4HQHW8k3BjBKKdrYPZO3MZ8CTKIKSYRr/oE2UUcDKiLl5K2bEVCcdswgs0EwqmvaNVqww4awk6ER2hsAriQGDujtuKDUHcmEndBmxZru3dk21WBK5YFkRBNj28cCw0go/uSvBv2xRLgibqzzXEaiBbZaEhpgxpMHR9AiXTlwnMMu3ork4OJ0ba45kcnq8EbH3uyKYmaRmfm/jBMfhnN9izqaR86SsNvMrVGSwarNYDVsjM/wGGP9zfpF9Luo=
  - secure: Bp3gZzbg5NJtxgSz8kgshoRYT4KiWa35HcM+w2KXIUVQVB6ZRvQuwGn6KcJvk1C3f4frrf+eaIPsYrkHZE/Gp8tIqoP7FkTqvSxNodoiKGvuISGfdWHqAVWk5hKEGon8I/UmGXlnzs0FVohmTiqKM/7SCB+KvQL95GsD9XiOm0YD6OqCA1Ylocw8sg+EkoNcAxFgOeKrL2FYE1XT+XS4I7+rkb+P+CllMy2r+zv3/5j1gUMp+1XUt3ordnAqSe9uicK/ytZTIshDJXmNX6CGH8NxdzMHiTyg2u7hzG+xMCfkNbwDVvD1Q2Rz2p8VNKkT9u994Nzry/qAutDWjjZlow++aDnq+xav5SMarNyd2FEOYrVk6x/ZQ9NpWzikEXHasrIJFIil1AeE2dq2lIfHyCBcni3imWp4YTNX5ikU9nkxyQ6646DaQYdJs14aoCpSobzZVNjbX6bdXdpNC05lJHsVfGcjp3v443GUf6dzInTjUVCXR1Nuq69/AG32/wzHiNlh7PjqdEVR5HqdSSgWtMbHyk88trNjmwxK/pXH6kzgJwKRHSPc+8r9r5JUZtdtjSABsaQOFfeSKhbtaGEWq/zjR/Uw07qGUFbaLq2/e1gBrXSZHjfy26kCfvi+gfHJZNTlwpdYuOyewSUzcuKZ5uxH7/TnbCAnP7pJ7jx/8QA=
